CREATE DATABASE QLQuan
use QLQuan

CREATE TABLE  ThucUong(
	MSHH NVARCHAR (10) CONSTRAINT PK_ThucUong PRIMARY KEY,
	TenHang NVARCHAR (20),
	Gia INT NOT NULL,
	TinhTrang BIT,
)

CREATE TABLE DatHang(
	MSDH NVARCHAR (10) CONSTRAINT PK_DatHang PRIMARY KEY,
	MSHH NVARCHAR (10),
	SoLuong INT,
	TiLeGiam INT
)

CREATE TABLE HoaDon(
	MSDH NVARCHAR (10),
	NgayDat DATETIME
)

ALTER TABLE DatHang ADD CONSTRAINT FK__DatHang_ThucUong FOREIGN KEY (MSHH) REFERENCES ThucUong(MSHH)
ALTER TABLE HoaDon ADD CONSTRAINT FK_HoaDon_DatHang FOREIGN KEY (MSDH) REFERENCES DatHang(MSDH)

--INSERT INTO ThucUong
INSERT INTO ThucUong(MSHH,TenHang,Gia,TinhTrang)
VALUES ('TS001',N'Trà sữa khoai môn',50000,1)

INSERT INTO ThucUong(MSHH,TenHang,Gia,TinhTrang)
VALUES ('TS002',N'Trà sữa',35000,0)

INSERT INTO ThucUong(MSHH,TenHang,Gia,TinhTrang)
VALUES ('TS003',N'Trà đào',40000,1)

INSERT INTO ThucUong(MSHH,TenHang,Gia,TinhTrang)
VALUES ('TS004',N'Trà bạc hà',52000,1)

INSERT INTO ThucUong(MSHH,TenHang,Gia,TinhTrang)
VALUES ('TS005',N'Trà sữa bánh oreo',50000,0)

-- INSERT INTO DatHang
INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM001','TS001',10,5);

INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM002','TS002',100,50);

INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM003','TS003',5,0);

INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM004','TS004',200,10);


INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM006','TS004',5,20);

INSERT INTO DatHang(MSDH,MSHH,SoLuong,TiLeGiam)
VALUES ('TM007','TS004',5,20);

-- INSERT INTO HoaDon
INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM001','2020-5-3 3:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM002','2020-4-3 13:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM003','2020-4-3 23:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM004','2020-5-3 7:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM005','2020-5-3 5:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM006','2020-5-3 5:32:11')

INSERT INTO HoaDon(MSDH,NgayDat)
VALUES ('TM007','5/3/2020 6:37:42 PM')


-- test
SELECT * FROM HoaDon
SELECT * FROM DatHang
SELECT * FROM ThucUong